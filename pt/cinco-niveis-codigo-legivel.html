<!DOCTYPE html>
<html lang="pt-BR">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Os Cinco Níveis de Código Legível | carlos schults / blog</title>
  <link rel="apple-touch-icon" sizes="57x57" href="/img/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/img/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/img/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/img/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/img/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/img/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/img/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/img/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/img/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/img/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/img/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/img/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">
  <meta name="description" content="Foto por Greyson Joralemon no site UnsplashRecentemente, tenho pensado bastante sobre a legibilidade do código. O que significa para um trecho de código ser ...">
  
  <!-- Twitter card -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:creator" content="@carlosschults">
  <meta name="twitter:site" content="@carlosschults">
  <meta name="twitter:domain" content="carlosschults.net">
  <meta name="twitter:title" content="Os Cinco Níveis de Código Legível">
  <meta name="twitter:description" content="Foto por Greyson Joralemon no site UnsplashRecentemente, tenho pensado bastante sobre a legibilidade do código. O que significa para um trecho de código ser ...">

   <!-- Facebook meta -->
  
  
  <meta property="og:title" content="Os Cinco Níveis de Código Legível">
  <meta property="og:site_name" content="Carlos Schults / Blog" />
  <meta property="og:locale" content="pt_BR">  
  <meta property="og:type" content="article" />
  <meta property="og:image" content="/img/levels.jpg" />  
  <meta property="og:image:type" content="image/jpeg">
  <meta property="og:image:width" content="1038"> 
  <meta property="og:image:height" content="437">  
  
  <meta property="og:article:published_time" content="2023-10-18T00:00:00+00:00" />  
  <meta property="og:article:author" content="Carlos Schults" />
  
  <meta property="og:article:tag" content="boas-praticas" />
  <meta property="og:article:tag" content="legibilidade" />    
  
  <meta property="og:url" content="https://carlosschults.net/pt/cinco-niveis-codigo-legivel"/>
  <meta property="og:description" content="Foto por Greyson Joralemon no site UnsplashRecentemente, tenho pensado bastante sobre a legibilidade do código. O que significa para um trecho de código ser ...">
  <link rel="stylesheet" href="/css/main.css">  
  
   <link rel="canonical" href="https://carlosschults.net/pt/cinco-niveis-codigo-legivel">
   
  
  <link rel="alternate" hreflang="en" href="/en/fivel-levels-readable-code/" />
  <link rel="alternate" hreflang="pt" href="/pt/cinco-niveis-codigo-legivel" />
  
  <link rel="alternate" type="application/rss+xml" title="carlos schults / blog" href="https://carlosschults.net/rss.xml">
</head>

  <body>
    <header class="site-header">
  <div class="wrapper">    
    <a class="site-title" href="/pt/">carlos schults / blog</a>
    
    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">        
          
          <a class="page-link" href="/sobre/">Sobre</a>
          <a class="page-link" href="/busca/">Busca</a>
                  
      </div>
    </nav>

  </div>

</header>

<div class="wrapper" style="text-align: right; line-height: 2em">
  
   <a href="/en/fivel-levels-readable-code/" class="en">en</a>  <a href="/pt/cinco-niveis-codigo-legivel" class="pt">pt</a> 

  
  
</div>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">    
    <h2 class="postTitle" itemprop="headline">Os Cinco Níveis de Código Legível</h2>
    <p class="post-meta">   
    <time datetime="2023-10-18T00:00:00+00:00" itemprop="datePublished">18/10/2023
    </time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">Carlos Schults</span></span>
  <span class="tags" itemprop="keywords"> • Tags: <a href="/tag_ptbr/boas-praticas">boas-praticas </a> <a href="/tag_ptbr/legibilidade">legibilidade </a> </span>
  </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p><img src="/img/levels.jpg" alt="" /></p>

<p><span>Foto por <a href="https://unsplash.com/@greysonjoralemon?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash">Greyson Joralemon</a> no site <a href="https://unsplash.com/photos/w000nNe9Xq8?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash">Unsplash</a></span></p>

<p>Recentemente, tenho pensado bastante sobre a legibilidade do código. O que significa para um trecho de código ser legível? É possível definir a legibilidade de forma objetiva? Deveríamos tentar fazer isso?</p>

<p>Essas são algumas das perguntas sobre as quais tenho pensado e, nesta publicação, apresento minhas respostas na tentativa de iniciar uma conversa sobre legibilidade.</p>

<p>Aqui está a versão TL;DR: sim, acredito que definir objetivamente a legibilidade do código é possível e desejável e, neste artigo, sugiro um modelo para avaliar a legibilidade.</p>

<h2 id="a-importância-de-uma-definição-de-legibilidade-de-código">A Importância de Uma Definição de Legibilidade de Código</h2>

<p>A legibilidade sempre vai ser um pouco subjetiva e, até certo ponto, essa subjetividade é inofensiva. Entretanto, ela <em>pode</em> causar problemas em alguns cenários.</p>

<p>Se estivermos trabalhando em uma equipe, é importante definir pelo menos algumas diretrizes objetivas em relação à legibilidade do código, e isso se deve às revisões de código (code reviews). Se o time não conseguir chegar a um consenso sobre o que é código legível, o feedback dos reviews fica parecendo arbitrário.</p>

<p>Em resumo: as equipes precisam de convenções. Uma equipe deve ter uma visão sobre o que constitui um código bom e legível.</p>

<h2 id="um-framework-para-pensar-sobre-a-legibilidade-do-código-níveis">Um Framework Para Pensar Sobre a Legibilidade Do Código: Níveis</h2>

<p>Há pouco tempo, comecei a pensar na legibilidade do código em termos de níveis. Os níveis representam preocupações específicas com relação à legibilidade e são ordenados em termos de prioridade.</p>

<p>Ou seja, o nível 1 representa as coisas mais básicas que você precisa resolver primeiro, antes de avançar para os níveis mais altos. Arrume o básico e depois vá para o avançado. Tipo a <a href="https://pt.wikipedia.org/wiki/Hierarquia_de_necessidades_de_Maslow">hierarquia de necessidades de Maslow</a>, mas para código.</p>

<p>Você vai ver alguns exemplos de código, em C#. Mas o que vou mostrar aqui se aplica a qualquer linguagem, a menos que eu diga explicitamente o contrário.</p>

<p>Sem mais delongas, aqui estão os cinco níveis de código legível.</p>

<h2 id="nível-1-seu-código-faz-o-mínimo-necessário">Nível 1: Seu Código Faz O Mínimo Necessário</h2>

<p>(Sim, nível um. Por favor, não me enche com isso de que “os programadores começam a contar no zero”).</p>

<p>O nível 1 de código legível refere-se ao código que faz o mínimo necessário. Pense em diretrizes simples de legibilidade, como:</p>

<ul>
  <li>Escolher <a href="https://carlosschults.net/pt/como-escolher-bons-nomes/">nomes descritivos</a> para variáveis, funções, classes e assim por diante.</li>
  <li>Evitar muitos níveis de indentação.</li>
  <li>Manter a <a href="https://carlosschults.net/pt/reduzir-complexidade-ciclomatica/">complexidade ciclomática baixa</a>.</li>
  <li>Evitar <a href="https://carlosschults.net/pt/tipos-de-comentarios-a-evitar/">comentários que não agregam nenhum valor</a>.</li>
  <li>Manter <a href="https://blog.ploeh.dk/2019/11/04/the-80-24-rule/">funções e outros blocos de código pequenos</a>.</li>
  <li>Evitar <a href="https://pt.wikipedia.org/wiki/N%C3%BAmero_m%C3%A1gico_(programa%C3%A7%C3%A3o_de_sistemas)">números mágicos</a>.</li>
</ul>

<p>Não é difícil aprender esses tipos de práticas recomendadas. Você pode aprender a maioria delas por meio da experiência, ouvindo o feedback de desenvolvedores mais experientes durante as revisões de código ou lendo livros e até mesmo publicações em blogs como os listados acima.</p>

<h2 id="nível-2-seu-código-é-idiomático">Nível 2: Seu Código é Idiomático</h2>

<p>Considere a seguinte classe C#:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Person</span>
<span class="p">{</span>
    <span class="k">private</span> <span class="kt">string</span> <span class="n">_name</span><span class="p">;</span>
    <span class="k">private</span> <span class="kt">int</span> <span class="n">_age</span><span class="p">;</span>

    <span class="k">public</span> <span class="nf">Person</span><span class="p">(</span><span class="kt">string</span> <span class="n">name</span><span class="p">,</span> <span class="kt">int</span> <span class="n">age</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_name</span> <span class="p">=</span> <span class="n">name</span><span class="p">;</span>
        <span class="n">_age</span> <span class="p">=</span> <span class="n">age</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">SetName</span><span class="p">(</span><span class="kt">string</span> <span class="n">name</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_name</span> <span class="p">=</span> <span class="n">name</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="nf">GetName</span><span class="p">()</span> <span class="p">=&gt;</span> <span class="n">_name</span><span class="p">;</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">SetAge</span><span class="p">(</span><span class="kt">int</span> <span class="n">age</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">_age</span> <span class="p">=</span> <span class="n">age</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">int</span> <span class="n">GetAge</span> <span class="p">=&gt;</span> <span class="n">_age</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Não há nada de errado com a classe acima, pelo menos não tecnicamente. O compilador a compila sem problemas e a classe funciona como deveria.</p>

<p>Entretanto, se você tem pelo menos alguma experiência com o C#, notou algo estranho quando viu o código: os métodos getter e setter. A equipe de desenvolvimento do C# transformou os conceitos de getters e setters em um “cidadão de primeira classe” da linguagem desde o início, por meio do conceito de propriedades. Se não houver lógica adicional envolvida na definição e obtenção de valores, o programador poderá usar <a href="https://learn.microsoft.com/pt-br/dotnet/csharp/programming-guide/classes-and-structs/auto-implemented-properties">propriedades autoimplementadas</a> com um resultado conciso (nem mesmo os campos privados precisam mais ser declarados explicitamente):</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">class</span> <span class="nc">Person</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="nf">Person</span><span class="p">(</span><span class="kt">string</span> <span class="n">name</span><span class="p">,</span> <span class="kt">int</span> <span class="n">age</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">Name</span> <span class="p">=</span> <span class="n">nome</span><span class="p">;</span>
        <span class="n">Age</span> <span class="p">=</span> <span class="n">idade</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="kt">string</span> <span class="n">Name</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">Age</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Tudo isso quer dizer que, para ser legível, um determinado trecho de código precisa ser <em>idiomático para a linguagem em que está sendo escrito.</em> Se estiver escrevendo em C#, siga os padrões de codificação e as convenções da linguagem. O mesmo se aplica a Java, JavaScript e qualquer outra linguagem.</p>

<p>A comunidade Python tem um conceito maravilhoso para descrever o código Python que segue os padrões e as filosofias da linguagem: “pythônico”. Um trecho de código Python pode funcionar, mas se não for pythônico, os engenheiros experientes em Python acharão o código difícil de trabalhar.</p>

<p>Por que escrever um código idiomático é importante para a legibilidade? Quando você olha para um código - em qualquer linguagem - que não se parece com o que deveria ser, de acordo com o modelo mental que você tem dessa linguagem, fica mais difícil acompanhar o código.</p>

<p>O código não idiomático aumenta a <a href="https://linearb.io/blog/cognitive-complexity-in-software">complexidade cognitiva</a> de uma base de código. Isso dificulta a integração de desenvolvedores que estejam familiarizados com os padrões e expressões idiomáticas da linguagem. Se você tiver um projeto open source, o excesso de idiossincrasias no código pode afastar possíveis colaboradores.</p>

<p>É claro que o oposto de tudo isso é verdadeiro.</p>

<h2 id="nível-3-seu-código-revela-a-intenção-por-meio-do-uso-tático-da-tipagem">Nível 3: Seu Código Revela a Intenção Por Meio Do Uso Tático Da Tipagem</h2>

<p>Como o título sugere, este item, diferentemente dos dois anteriores, só se aplica a linguagens estaticamente tipadas - ou, talvez, dinamicamente tipadas que apresentem algum tipo de anotação de tipo opcional.</p>

<p>Vamos começar com um exemplo simples:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Canvas</span><span class="p">.</span><span class="nf">DrawLine</span><span class="p">(</span><span class="m">5</span><span class="p">);</span>
</code></pre></div></div>

<p>Não leve em consideração o número mágico, que por si só já é um problema. Considere que você sabe que o método <code class="language-plaintext highlighter-rouge">DrawLine</code> tem um único parâmetro, <code class="language-plaintext highlighter-rouge">length</code>. A linha poderia ter se tornado um pouco mais legível com o uso de um <a href="https://learn.microsoft.com/pt-br/dotnet/csharp/programming-guide/classes-and-structs/named-and-optional-arguments">argumento nomeado,</a>, mas mesmo isso não resolveria o maior problema: qual é a unidade de medida?</p>

<p>Além de prejudicar a legibilidade, esse problema abre a possibilidade de bugs, devido a uma incompatibilidade de unidades - uma parte do código “pensa” que a unidade é centímetros, enquanto outras podem acreditar que é polegadas.</p>

<p>O que estou defendendo em vez disso? Bem, use a tipagem a seu favor. Aqui, uma boa solução seria criar um <a href="https://carlosschults.net/pt/value-objects-ferramenta/">value object</a> chamado, digamos, <code class="language-plaintext highlighter-rouge">Length</code>. Esse tipo teria vários métodos factory com o nome de unidades de medida específicas, e seu construtor seria privado. Então, daria para mudar o exemplo anterior para isso:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Canvas</span><span class="p">.</span><span class="nf">DrawLine</span><span class="p">(</span><span class="n">Length</span><span class="p">.</span><span class="nf">FromCentimeters</span><span class="p">(</span><span class="m">5</span><span class="p">));</span>
</code></pre></div></div>

<p>Outro exemplo seria o uso do tipo <code class="language-plaintext highlighter-rouge">TimeSpan</code> para expressar durações, em vez de usar valores primitivos ou usar a classe <a href="https://learn.microsoft.com/pt-br/dotnet/api/system.uri?view=net-7.0">Uri</a> em vez de apenas strings.</p>

<p>Talvez você esteja pensando que tudo isso é simplesmente uma forma complicada de dizer “evite a obsessão primitiva”. Também, mas tem mais coisas.</p>

<p>Para ilustrar meu ponto de vista, vou compartilhar outro exemplo - talvez um pouco forçado, admito. Digamos que você esteja resolvendo um problema que exija o uso de uma <a href="https://pt.wikipedia.org/wiki/Pilha_(inform%C3%A1tica)">pilha</a>. Nesse caso, nada o impede de usar a classe <code class="language-plaintext highlighter-rouge">List&lt;T&gt;</code> como uma pilha, certo?</p>

<ul>
  <li>O método <code class="language-plaintext highlighter-rouge">Add</code> seria seu substituto para a funcionalidade <code class="language-plaintext highlighter-rouge">push</code>.</li>
  <li>Para a funcionalidade <code class="language-plaintext highlighter-rouge">pop</code>, você usaria uma combinação de obter o último elemento da lista por meio de seu indexador e, em seguida, usar o método <code class="language-plaintext highlighter-rouge">RemoveAt</code> para excluir o item.</li>
</ul>

<p>A solução acima, apesar de ser um pouco complicada, funcionaria. Mas eu o encorajaria fortemente a usar a classe <code class="language-plaintext highlighter-rouge">Stack&lt;T&gt;</code> normal. O uso do tipo mais específico tornaria o código imediatamente mais legível para qualquer pessoa que saiba o que é uma pilha. Isso faria com que o código revelasse sua intenção.</p>

<p>Resumindo: a menos que você tenha um motivo justificável para não fazer isso, <strong>sempre prefira o tipo que representa melhor o conceito ou a funcionalidade de que você precisa</strong>. Isso não apenas tornará seu código mais robusto, mas também revelará melhor sua intenção.</p>

<h2 id="nível-4-seu-código-não-mistura-níveis-de-abstração">Nível 4: Seu Código Não Mistura Níveis de Abstração</h2>

<p>Seu código não deve misturar mais de um nível de abstração. O código que está na parte de “Regras de negócios” da sua base de código não deve mexer com o código que está na parte de “Preocupações de IO”, para dar um exemplo.</p>

<p>Por que isso é um problema? Veja a função a seguir:</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">static</span> <span class="kt">double</span> <span class="nf">CalculateAverageTemperature</span><span class="p">(</span><span class="kt">string</span> <span class="n">filePath</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">List</span><span class="p">&lt;</span><span class="n">ClimaticReading</span><span class="p">&gt;</span> <span class="n">readings</span> <span class="p">=</span> <span class="k">new</span><span class="p">();</span>

    <span class="k">try</span>
    <span class="p">{</span>
        <span class="k">using</span> <span class="nn">var</span> <span class="n">reader</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StreamReader</span><span class="p">(</span><span class="n">filePath</span><span class="p">);</span>
        <span class="k">while</span> <span class="p">(!</span><span class="n">reader</span><span class="p">.</span><span class="n">EndOfStream</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">line</span> <span class="p">=</span> <span class="n">reader</span><span class="p">.</span><span class="nf">ReadLine</span><span class="p">();</span>
            <span class="kt">var</span> <span class="n">values</span> <span class="p">=</span> <span class="n">line</span><span class="p">?.</span><span class="nf">Split</span><span class="p">(</span><span class="sc">','</span><span class="p">)</span> <span class="p">??</span> <span class="n">Array</span><span class="p">.</span><span class="n">Empty</span><span class="p">&lt;</span><span class="kt">string</span><span class="p">&gt;();</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">values</span><span class="p">.</span><span class="n">Length</span> <span class="p">&lt;</span> <span class="m">2</span><span class="p">)</span>
                <span class="k">continue</span><span class="p">;</span>
            
            <span class="k">if</span> <span class="p">(</span><span class="n">DateTime</span><span class="p">.</span><span class="nf">TryParse</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="m">0</span><span class="p">],</span> <span class="k">out</span> <span class="n">DateTime</span> <span class="n">date</span><span class="p">)</span> <span class="p">&amp;&amp;</span>
                <span class="kt">double</span><span class="p">.</span><span class="nf">TryParse</span><span class="p">(</span>
                    <span class="n">values</span><span class="p">[</span><span class="m">1</span><span class="p">],</span>
                    <span class="n">NumberStyles</span><span class="p">.</span><span class="n">Float</span><span class="p">,</span>
                    <span class="n">CultureInfo</span><span class="p">.</span><span class="n">InvariantCulture</span><span class="p">,</span>
                    <span class="k">out</span> <span class="kt">double</span> <span class="n">temperature</span><span class="p">))</span>
            <span class="p">{</span>
                <span class="kt">var</span> <span class="n">reading</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ClimaticReading</span>
                <span class="p">{</span>
                    <span class="n">Date</span> <span class="p">=</span> <span class="n">data</span><span class="p">,</span>
                    <span class="n">Temperature</span> <span class="p">=</span> <span class="n">temperatura</span>
                <span class="p">};</span>
                <span class="n">readings</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">reading</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">ex</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">InvalidOperationException</span><span class="p">(</span><span class="s">$"Erro ao ler o arquivo CSV: </span><span class="p">{</span><span class="n">ex</span><span class="p">.</span><span class="n">Message</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">readings</span><span class="p">.</span><span class="n">Count</span> <span class="p">&lt;</span> <span class="m">3</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">InvalidOperationException</span><span class="p">(</span><span class="s">"Deve haver pelo menos 3 leituras para calcular a média."</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">readings</span> <span class="p">=</span> <span class="n">readings</span><span class="p">.</span><span class="nf">OrderBy</span><span class="p">(</span><span class="n">leitura</span> <span class="p">=&gt;</span> <span class="n">leitura</span><span class="p">.</span><span class="n">Temperatura</span><span class="p">).</span><span class="nf">ToList</span><span class="p">();</span>

    <span class="n">readings</span><span class="p">.</span><span class="nf">RemoveAt</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
    <span class="n">readings</span><span class="p">.</span><span class="nf">RemoveAt</span><span class="p">(</span><span class="n">readings</span><span class="p">.</span><span class="n">Count</span> <span class="p">-</span> <span class="m">1</span><span class="p">);</span>

    <span class="kt">double</span> <span class="n">sum</span> <span class="p">=</span> <span class="n">readings</span><span class="p">.</span><span class="nf">Sum</span><span class="p">(</span><span class="n">reading</span> <span class="p">=&gt;</span> <span class="n">reading</span><span class="p">.</span><span class="n">Temperature</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">average</span> <span class="p">=</span> <span class="n">sum</span> <span class="p">/</span> <span class="n">readings</span><span class="p">.</span><span class="n">Count</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">average</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>A função lê e analisa um arquivo .CSV que contém leituras climáticas. As linhas que não têm os dois valores esperados (data e temperatura) são descartadas. Em seguida, ela classifica as leituras, remove os valores mais altos e mais baixos e, por fim, calcula e retorna a média dos valores restantes.</p>

<p>Essa função mistura pelo menos dois níveis de abstração:</p>

<ul>
  <li>O nível de “lógica de domínio”, ou seja, a parte que faz o cálculo</li>
  <li>O nível baixo: leitura e parsing do arquivo .CSV.</li>
</ul>

<p>Você poderia até argumentar que há três níveis, já que o nível baixo pode ser dividido em dois: manipulação do sistema de arquivos e parsing de arquivos.</p>

<p>Essa função de exemplo não é a coisa mais difícil de ler no mundo, mas certamente é mais difícil do que deveria ser. Ela mistura lógica de domínio com IO. Ela mistura lógica de domínio com tratamento de erros de IO e até mesmo parsing. Uma solução melhor seria ter um método que obtivesse uma coleção de <code class="language-plaintext highlighter-rouge">ClimaticReading</code> e calculasse e retornasse a média.</p>

<p>Em outras palavras, uma solução melhor e mais elegante seria ter uma <strong>função pura</strong>. Esse novo método, além de ser mais legível, seria mais robusto, menos propenso a erros e também determinístico, ou seja, sempre retornaria os mesmos resultados para a mesma entrada, tornando-o intrinsecamente <a href="https://carlosschults.net/pt/testes-unitarios-csharp-intro-tdd/">testável por testes de unidade</a>.</p>

<h2 id="nível-5-seu-código-fala-a-linguagem-do-negócio">Nível 5: Seu Código Fala a Linguagem Do Negócio</h2>

<p>Você atingiu o nível 5 quando escreve um código que fala a linguagem do negócio. Quando você usa termos que são os mesmos que os especialistas no domínio usam.</p>

<p>Em outras palavras: sim, estou praticamente defendendo a mesma coisa que os programadores pragmáticos chamam de “programar mais próximo do domínio”, ou que Eric Evans chamou de linguagem ubíqua em seu clássico “Domain-Driven Design: Tackling Complexity in the Heart of Software”.</p>

<p>Se o seu código usa termos não ortodoxos em vez de termos do setor, isso dificulta a integração quando você traz novas pessoas que estão familiarizadas com o negócio, mas são novas na base de código. Se o código usar um jargão diferente do que os stakeholders usam, a comunicação se tornará mais cansativa, pois exigirá que você faça um mapeamento constante entre os conceitos apenas para conseguir acompanhar o que está acontecendo.</p>

<p>O nível 5 é, de certa forma, uma consequência lógica do nível 4. Se você separar cuidadosamente as preocupações da sua aplicação, certificando-se de que o código de alto nível não se misture com o código de baixo nível, a tendência é que o código de alto nível fique cada vez mais próximo do domínio em termos de nomenclatura.</p>

<h2 id="dê-um-level-up-na-legibilidade-do-seu-código">Dê um “Level Up” Na Legibilidade Do Seu Código</h2>

<p>A maioria dos programadores concorda que a legibilidade do código é vital. Mas e quanto a concordar com a aparência de um “código legível”? Aí é outra história.</p>

<p>Como eu disse anteriormente, acho que um nível de subjetividade quando se trata de legibilidade é inevitável e inofensivo. Entretanto, no contexto de um time, deve haver pelo menos algum consenso sobre o que é um código legível. Caso contrário, as revisões de código se tornam exercícios de futilidade e o moral da equipe despenca.</p>

<p>Acredito que nosso setor se beneficiaria de uma forma mais objetiva de pensar sobre a legibilidade. Nesta publicação, dei minha pequena contribuição, na forma de um checklist de legibilidade, em ordem de prioridade.</p>

<p>Mas, novamente: a ideia desta publicação não é dar uma resposta definitiva, <strong>mas iniciar uma conversa</strong>. Você acha que os modelos de “níveis” não fazem sentido? Ou talvez queira compartilhar seus próprios níveis?  Convido-o a compartilhar sua opinião por meio de um comentário ou a me enviar um e-mail (meu endereço está na página sobre).</p>

<p>_Agradecimentos especiais a <a href="https://blog.ploeh.dk/">Mark Seemann</a>, <a href="https://www.linkedin.com/in/pgpbarbosa/">Pedro Barbosa</a> e <a href="https://www.linkedin.com/in/petermorlion/">Peter Morlion</a> por lerem e darem feedback em rascunhos deste post.</p>

    
    
      
    
    
        Encontrou algum erro no post? <a href="http://github.com/carlosschults/carlosschults.github.io/edit/master/_posts/2023-10-18-cinco-niveis-codigo-legivel.md">Sugira uma edição</a>      
    
    
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
                    
            <a rel="previous" class="previous" href="/pt/git-historico-bonito/">&larr; Fazendo Seu Histórico Git Ficar Bonitão Com Amend e Rebase </a>
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
        	    
            <a rel="next" class="next" href="/pt/git-bisect-intro/">Git Bisect: Uma Introdução Para Iniciantes &rarr;</a>
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
         
        
        
                
        
        
                
      
    <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
        // Store these for reloads
        window.disqus_identifier = window.location.pathname;
        window.disqus_url = window.location.href;
        
        // Set initial theme - match it with the site's theme
        const currentTheme = document.body.getAttribute('data-theme') || 'light';
        this.page.theme = currentTheme === 'dark' ? 'dark' : 'light';
    };
    
    (function() {
        var d = document, s = d.createElement('script');
        s.src = '//carlosschultsblog.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>    
  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">         
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/carlosschults"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">carlosschults</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/carlosschults"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">carlosschults</span></a>

          </li>
          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Artigos sobre desenvolvimento de software e tecnologia.</p>
      </div>
    </div>

  </div>

</footer>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-92788641-1', 'auto');
  ga('send', 'pageview');

</script>

    <script src="/js/dark-mode.js"></script>
  </body>

</html>
